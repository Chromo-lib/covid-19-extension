!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).covid=n()}(this,(function(){"use strict";async function e(e="tunisia"){try{let n=await fetch("https://corona.lmao.ninja/v2/countries/"+e);return await n.json()}catch(e){return e.message}}function n(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function s(e,n){return`\n<h3 class="m-0">${e}</h3>\n<small class="mb-10">${new Date(n).toString().slice(0,15)}</small> \n<p>We hope you are staying healthy and safe.</p>`}function t(e){return`   \n<div class="details">\n\n  <div class="d-flex-column">\n    <img src=${e.countryInfo.flag} alt="..." class="mb-5"  />\n    <span class="ellipsis scale">${e.country}</span>\n  </div>\n\n  <div class="d-flex-column">\n    <span class="cl-blue-sky">Total Cases</span>\n    <span class="scale w-64">${n(e.cases)}</span>\n  </div>\n\n  <div class="d-flex-column">\n    <span class="cl-blue-sky">total deaths</span>\n    <span class="scale w-64">${n(e.deaths)}</span>\n  </div>\n\n  <div class="d-flex-column">\n    <span class="cl-blue-sky">Total recovered</span>\n    <span class="scale w-64">${n(e.recovered)}</span>\n  </div>\n\n  <div class="d-flex-column">\n    <span class="cl-blue-sky">today Cases</span>\n    <span class="scale w-64">${n(e.todayCases)}</span>\n  </div>\n\n  <div class="d-flex-column">\n    <span class="cl-blue-sky">today Deaths</span>\n    <span class="scale w-64">${n(e.todayDeaths)}</span>\n  </div>\n\n  <div class="d-flex-column">\n    <span class="cl-blue-sky">recovered / Cases</span>\n    <span class="scale w-64">${parseInt(e.recovered/e.cases*100,10)}%</span>\n  </div>\n  \n  </div>`}let c=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);return chrome=c?chrome:browser,(()=>{!function(){const e=document.querySelectorAll(".tabs>button"),n=document.querySelectorAll(".tabs-items>ul");let s="",t=document.getElementById("btn-load-more");e.forEach(e=>{e.addEventListener("click",()=>{s=e.id,n.forEach(e=>{e.style.display="none";let n=e.getAttribute("data-id");n===s&&(t.style.display="countries"===n?"block":"none",e.style.display="block")})})})}(),function(){let n=document.getElementById("set-country"),s=document.querySelector(".btn-save"),t=document.querySelector(".btn-close");function c(){let e=document.querySelector(".input-container");e.classList.contains("d-flex-col-center")?(e.classList.remove("d-flex-col-center"),e.classList.add("dip-none"),chrome.storage.local.get(["country"],(function(e){console.log("Value currently is "+e.country)}))):(e.classList.remove("dip-none"),e.classList.add("d-flex-col-center"))}chrome.storage.local.get(["country"],async n=>{try{let s=await e(n.country);document.getElementById("curr-country").src=s.countryInfo.flag}catch(e){}}),s.addEventListener("click",(function(){let n=document.getElementById("input-country");chrome.storage.local.set({country:n.value},async()=>{try{let s=await e(n.value);document.getElementById("curr-country").src=s.countryInfo.flag}catch(e){chrome.storage.local.set({country:"tunisia"})}})}),!1),t&&t.addEventListener("click",c,!1),n&&n.addEventListener("click",c,!1)}();let c="tunisia",a=[],l=0,o=document.getElementById("btn-load-more");async function d(){let n=await e(c),a=document.getElementById("list");a.innerHTML=s(n.country,n.updated),a.innerHTML+=t(n)}async function r(){l+=10;try{a=await e("");let n=document.getElementById("list-d");n.innerHTML=s("All countries",a[0].updated),a.sort((e,n)=>+n.cases-+e.cases).slice(0,l).forEach(e=>{n.innerHTML+=t(e)})}catch(e){}}chrome.storage.local.get(["country"],async e=>{e&&e.country&&(c=e.country),await d()}),chrome.storage.onChanged.addListener(async e=>{await d(e.country.newValue)}),document.getElementById("stats").addEventListener("click",(async function(){l+=10;try{a=await e("");let t=document.getElementById("list-stats");t.innerHTML=s("Statistics",a[0].updated);const c=a.reduce((e,n)=>e+n.todayCases,0),l=a.reduce((e,n)=>e+n.todayDeaths,0),o=a.reduce((e,n)=>e+n.cases,0),d=a.reduce((e,n)=>e+n.deaths,0),r=a.reduce((e,n)=>e+n.recovered,0);t.innerHTML+=function(e,s,t,c,a,l){return`\n<div class="d-flex">\n  <div class="d-flex-column box-stats mr-10"> \n    <h3 class="cl-rose mb-0">total today cases</h3>\n    <h3>${n(e)}</h3>\n  </div>\n\n  <div class="d-flex-column box-stats ml-10"> \n    <h3 class="cl-rose mb-0">total today deaths</h3>\n    <h3>${n(s)}</h3>\n  </div>\n</div>\n\n<div class="details m-0 fs-10">\n  <div class="d-flex-column border-right"> \n    <span class="cl-blue-sky">total cases</span>\n    <p class="m-0">${n(t)}</p>\n  </div>\n\n  <div class="d-flex-column border-right">\n    <span class="cl-blue-sky">total deaths</span>\n    <p class="m-0">${n(c)}</p>\n  </div>\n\n  <div class="d-flex-column border-right">\n    <span class="cl-blue-sky">total recovered</span>\n    <p class="m-0">${n(a)}</p>\n  </div>\n\n  <div class="d-flex-column">\n    <span class="cl-blue-sky">recovered / cases</span>\n    <p class="m-0">${n(l)}%</p>\n  </div>\n</div>`}(c,l,o,d,r,parseInt(r/o*100,10))}catch(e){}}),!1),document.getElementById("countries").addEventListener("click",r,!1),o&&o.addEventListener("click",r,!1)})()}));
