!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=n||self).covid=e()}(this,(function(){"use strict";async function n(n="tunisia"){try{let e=await fetch("https://corona.lmao.ninja/v2/countries/"+n);return await e.json()}catch(n){return n.message}}function e(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function s(n,e){return`\n    <h3 class="m-0">${n}</h3>\n    <small class="mb-10">${new Date(e).toString().slice(0,15)}</small> \n    <p>We hope you are staying healthy and safe.</p>\n  `}function t(n){return`   \n  <div class="details">\n\n    <div class="d-flex-column">\n      <img src=${n.countryInfo.flag} alt="..." class="mb-5"  />\n      <span class="ellipsis scale">${n.country}</span>\n    </div>\n\n    <div class="d-flex-column">\n      <span class="cl-blue-sky">Total Cases</span>\n      <span class="scale">${e(n.cases)}</span>\n    </div>\n\n    <div class="d-flex-column">\n      <span class="cl-blue-sky">total deaths</span>\n      <span class="scale">${e(n.deaths)}</span>\n    </div>\n\n    <div class="d-flex-column">\n      <span class="cl-blue-sky">Total recovered</span>\n      <span class="scale">${e(n.recovered)}</span>\n    </div>\n\n    <div class="d-flex-column">\n      <span class="cl-blue-sky">today Cases</span>\n      <span class="scale">${e(n.todayCases)}</span>\n    </div>\n\n    <div class="d-flex-column">\n      <span class="cl-blue-sky">today Deaths</span>\n      <span class="scale">${e(n.todayDeaths)}</span>\n    </div>\n      \n    </div>`}return(()=>{!function(){const n=document.querySelectorAll(".tabs>button"),e=document.querySelectorAll(".tabs-items>ul");let s="",t=document.getElementById("btn-load-more");n.forEach(n=>{n.addEventListener("click",()=>{s=n.id,e.forEach(n=>{n.style.display="none";let e=n.getAttribute("data-id");e===s&&(t.style.display="countries"===e?"block":"none",n.style.display="block")})})})}(),function(){let n=document.getElementById("set-country"),e=document.querySelector(".btn-save"),s=document.querySelector(".btn-close");function t(){let n=document.querySelector(".input-container");n.classList.contains("d-flex-col-center")?(n.classList.remove("d-flex-col-center"),n.classList.add("dip-none"),chrome.storage.sync.get(["country"],(function(n){console.log("Value currently is "+n.country)}))):(n.classList.remove("dip-none"),n.classList.add("d-flex-col-center"))}e.addEventListener("click",(function(){let n=document.getElementById("input-country");chrome.storage.sync.set({country:n.value},()=>{})}),!1),s&&s.addEventListener("click",t,!1),n&&n.addEventListener("click",t,!1)}();let c="tunisia",a=[],l=0,o=document.getElementById("btn-load-more");async function d(){let e=await n(c),a=document.getElementById("list");a.innerHTML=s(e.country,e.updated),a.innerHTML+=t(e)}async function i(){l+=10;try{a=await n("");let e=document.getElementById("list-d");e.innerHTML=s("All countries",a[0].updated),a.sort((n,e)=>+e.cases-+n.cases).slice(0,l).forEach(n=>{e.innerHTML+=t(n)})}catch(n){console.log(n)}}chrome.storage.sync.get(["country"],async n=>{n&&n.country&&(c=n.country),await d()}),chrome.storage.onChanged.addListener(async n=>{await d(n.country.newValue)}),document.getElementById("stats").addEventListener("click",(async function(){l+=10;try{a=await n("");let t=document.getElementById("list-stats");t.innerHTML=s("Statistics",a[0].updated);const c=a.reduce((n,e)=>n+e.todayCases,0),l=a.reduce((n,e)=>n+e.todayDeaths,0),o=a.reduce((n,e)=>n+e.cases,0),d=a.reduce((n,e)=>n+e.deaths,0),i=a.reduce((n,e)=>n+e.recovered,0);t.innerHTML+=function(n,s,t,c,a){return`\n  <div class="d-flex-column"> \n    <h3 class="cl-rose mb-0">total today cases</h3>\n    <h3>${e(n)}</h3>\n  </div>\n\n  <div class="d-flex-column"> \n    <h3 class="cl-rose mb-0">total today deaths</h3>\n    <h3>${e(s)}</h3>\n  </div>\n  \n  <div class="details m-0">    \n\n    <div class="d-flex-column"> \n      <span class="cl-blue-sky">total cases</span>\n      <p class="m-0">${e(t)}</p>\n    </div>\n\n    <div class="d-flex-column">\n      <span class="cl-blue-sky">total deaths</span>\n      <p class="m-0">${e(c)}</p>\n    </div>\n\n    <div class="d-flex-column">\n      <span class="cl-blue-sky">total recovered</span>\n      <p class="m-0">${e(a)}</p>\n    </div>\n  </div>`}(c,l,o,d,i)}catch(n){console.log(n)}}),!1),document.getElementById("countries").addEventListener("click",i,!1),o&&o.addEventListener("click",i,!1)})()}));
