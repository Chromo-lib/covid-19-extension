!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):e}function t(t,a){const s=document.createElement("ul");s.innerHTML=function(t){const{cases:a,deaths:s,recovered:n,todayCases:l,todayDeaths:c}=t,d={cases:e(a),deaths:e(s),recovered:e(n),todayCases:e(l),todayDeaths:e(c),casesDeaths:parseInt(s/a*100,10)+"%"};return Object.values(d).map(e=>`<li>${e}</li>`)}(a).join("");const n=document.createElement("div");n.innerHTML='<ul class="txt-bleu mb-5">\n    <li>Total Cases</li>\n    <li>total deaths</li>\n    <li>Total recovered</li>\n    <li>today Cases</li>\n    <li>today Deaths</li>\n    <li>deaths / Cases</li>\n  </ul>',n.classList.add("d-flex-col","justify-between"),n.appendChild(s);const l=document.createElement("div");l.appendChild(function(e){const{countryInfo:t}=e,a=document.createElement("img");a.src=t.flag,a.alt=e.country,a.classList.add("mb-5");const s=document.createElement("span");s.textContent=e.country,s.classList.add("truncate");const n=document.createElement("div");return n.appendChild(a),n.appendChild(s),n.classList.add("box"),n}(a)),l.appendChild(n),l.classList.add("d-flex","py-1","border-bottom"),t.appendChild(l)}class a{static async fetchData(e="tunisia"){try{let t=await fetch("https://corona.lmao.ninja/v2/countries/"+e),a=await t.json();if(a&&a.message)throw a.message;return a}catch(e){}}}let s=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);chrome=s?chrome:browser;let n=10,l={},c=[];const d=["home","all","stats","settings"],o=document.getElementById("nav");function r(e=document.querySelector('[data-id="home"]')){e&&Object.keys(l).length>0&&(e.children[1].innerHTML="",e.children[0].children[0].textContent=l.country,e.children[0].children[1].textContent=(new Date).toDateString(),t(e.children[1],l))}function i(t){let a=c.reduce((e,t)=>e+t.cases,0),s=c.reduce((e,t)=>e+t.deaths,0),n=c.reduce((e,t)=>e+t.recovered,0),l=parseInt(s/a*100,10),d=parseInt(n/a*100,10),o=c.reduce((e,t)=>e+t.todayCases,0),r=c.reduce((e,t)=>e+t.todayDeaths,0),i=c.reduce((e,t)=>e+t.todayRecovered,0);t.innerHTML=`\n  <ul class="w-100 bg-dark-transp">\n  <li class="d-flex-col li-bordred"><span class="txt-bleu mb-5">total today cases</span> ${e(o)}</li>\n  <li class="d-flex-col li-bordred"><span class="txt-bleu mb-5">total today deaths</span> ${e(r)}</li>\n  <li class="d-flex-col li-bordred"><span class="txt-bleu mb-5">total today Recovered</span> ${e(i)}</li>\n  </ul>\n\n  <ul class="w-100">\n  <li class="d-flex-col li-bordred"><span class="txt-bleu mb-5">total cases</span> ${e(a)}</li>\n  <li class="d-flex-col li-bordred"><span class="txt-bleu mb-5">total deaths</span> ${e(s)}</li>\n  <li class="d-flex-col li-bordred"><span class="txt-bleu mb-5">total Recovered</span> ${e(n)}</li>  \n  </ul>\n  \n  <ul class="w-100 bg-dark-transp">\n    <li class="li-bordred d-flex-col">\n      <div class="ct-chart ct-perfect-fourth"></div>\n      <span>total Recovered ${e(n)}</span>\n      <span class="txt-red">total Deaths ${e(s)}</span>\n    </li>\n    <li class="li-bordred d-flex-col">\n      <div class="ct-chartt ct-perfect-fourth"></div>\n      <span>today Recovered ${e(i)}</span>\n      <span class="txt-red">today Deaths ${e(r)}</span>\n    </li>\n  </ul>\n  \n  <ul class="w-100">\n  <li class="d-flex-col li-bordred"><span class="txt-bleu mb-5">total deaths/<br >total cases</span> ${l}%</li>\n  <li class="d-flex-col li-bordred"><span class="txt-bleu mb-5">total Recovered/<br >total cases</span> ${d}%</li>\n  </ul>`,new Chartist.Pie(".ct-chart",{series:[n,s]},{showLabel:!1}),new Chartist.Pie(".ct-chartt",{series:[i,r]},{showLabel:!1})}function u(e){e.children[1].innerHTML="";const a=document.getElementById("btn-load-more");document.getElementById("filterCountries").addEventListener("keyup",s=>{a.style.display="none";let n=s.target.value.toLowerCase();n.length>0?(e.children[1].innerHTML="",c.forEach(a=>{a.country.toLowerCase().includes(n)&&t(e.children[1],a)})):(u(e),a.style.display="block")},!1),c.slice(0,n).forEach(a=>{t(e.children[1],a)}),a.addEventListener("click",()=>{n+=10,e.children[1].innerHTML="",c.slice(0,n).forEach(a=>{t(e.children[1],a)})},!1)}chrome.storage.local.get(["defaultCountryName"],(function(e){e&&e.defaultCountryName?a.fetchData(e.defaultCountryName).then(e=>{l=e,r()}).catch(e=>{l={},chrome.storage.local.set({defaultCountryName:"tunisia"})}):a.fetchData().then(e=>{l=e,r()}).catch(e=>{l={}})})),o.addEventListener("click",(function(e){const t=document.getElementById("tabs");let s=(e.path||event.composedPath&&event.composedPath()).find(e=>{if(d.includes(e.id))return e});Array.from(o.children).forEach(e=>{e.classList.remove("active-tab")}),Array.from(t.children).forEach(e=>{if(e.style.display="none",s.id===e.dataset.id){e.style.display="block",function(e,t){switch(e){case"settings":!function(e){let t=document.getElementById("alert");e.children[0].addEventListener("submit",e=>{e.preventDefault();let a=e.target.elements[0].value;/^[a-zA-Z]+$/.test(a)?(e.target.elements[0].disabled=!0,e.target.elements[1].disabled=!0,e.target.elements[1].textContent="Changed",e.target.elements[1].classList.add("bg-bleu"),t.style.display="none",chrome.storage.local.set({defaultCountryName:a}),window.location.reload()):(t.style.display="block",t.textContent="Invalid country name")},!1)}(t);break;case"stats":c.length>0?i(t):a.fetchData("").then(e=>{c=e.sort((e,t)=>+t.cases-+e.cases).slice(0),i(t)}).catch(e=>{});break;case"all":c.length>0?u(t):a.fetchData("").then(e=>{c=e.sort((e,t)=>+t.cases-+e.cases).slice(0),u(t)}).catch(e=>{});break;default:r(t)}}(s.id,e)}}),s.classList.add("active-tab")}),!1)}));
